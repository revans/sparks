require "./config/application"
require "./config/applications/api"
require "./apps/api"

# If you want to do Auto-Loading of Files, when
# those files change using Guard and Livereload,
# then uncomment below.
#
# The Procfile and Guardfile are configured to
# to do auto-reloading of SASS, CoffeeScript,
# CSS, JavaScript, and HTML files.

app = Rack::Builder.new do
  map "/assets" do
    environment = Sprockets::Environment.new

    %w{javascripts stylesheets images templates fonts}.each do |path|
      environment.append_path "./assets/#{path}"
      environment.append_path "./vendor/assets/#{path}"
    end

    run environment
  end

  # Removed the LiveReload when you go to production
  use Rack::LiveReload
  use Rack::MethodOverride

  map "/" do
    run <%= module_classname %>::Api.new
  end
end

run app
